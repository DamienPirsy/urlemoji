<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mini.css/3.0.1/mini-default.min.css">
        <script src="https://raw.githubusercontent.com/paragbhadoria/emoji.json/master/emoji.js"></script>
    </head>
    <body>
        
        <header class="sticky">
            <a href="#" class="logo">Logo</a>
            <a href="/" class="button">Home</a>
            <button>Download</button>
        </header>
        <div class="container">

            <div class="row">
                <div class="card">
                   <button type="button" onclick="enableLoop('valentine');">V</button>
                </div>
                <div class="card">
                    <button type="button" onclick="enableLoop('moon');">M</button>
                </div>
                <div class="card">
                  <button type="button" onclick="enableLoop('clocks');">C</button>
               </div>
               <div class="card">
                <button type="button" onclick="enableLoop('runner');">R</button>
             </div>
            </div>

            <div class="row">
                <div class="col-sm-5"></div>
                <div class="col-sm-7"></div>
            </div>
        </div>
                       
        
        <footer class="sticky">
            <p>Credits:</p>
            <ul>
              <li>Source article - http://matthewrayfield.com/articles/animating-urls-with-javascript-and-emojis </li>
              <li>List of all emoji for JavaScript - https://raw.githubusercontent.com/paragbhadoria/emoji.json/master/emoji.js</li>
              <li>Mini.css - https://minicss.org/docs#grid</li>
              <li>1 line ascii art - https://1lineart.kulaone.com/#/</li>
            </ul>
        </footer>
        <script>
          let t = null
          let active = null

          function enableLoop(loopname) {
            
            location.hash = '';
            clearTimeout(t);

            switch (loopname) {
              case 'valentine':
                if (active != 'valentine') {
                  vCounter = 0;
                  valentine();
                  active = 'valentine';
                } else {
                  active = null
                }
              break;
              case 'moon':
                if (active != 'moon') {
                  moon();
                  active = 'moon';
                } else {
                  active = null
                }
              break;
              case 'clocks':
                if (active != 'clocks') {
                  clocks();
                  active = 'clocks';
                } else {
                  active = null
                }
              break;
              case 'runner':
                if (active != 'runner') {

                  road = Array(50).fill('_');                  
                  road[0] = '||';
                  roadLen = road.length;
                  current = roadLen-1;
                  runner();
                  active = 'runner';
                } else {
                  active = null
                }
              break;
              default: 
                 alert(loopname + ' is not defined');
              break;
            }
          }

          /**
          * Valentine
          */
          function valentine() {
            el = ['ğŸ’‹', 'â–«ï¸', 'ğŸ’•', 'ğŸ’‘', 'ğŸ’—', '', 'ğŸ˜', 'ğŸ’']
            seq = ['0', '01', '011', '01111', '11112', '11121', '11211', '12111', '21113', '11131', '11311', '13111', '7','7','7','5', '4', '5', '4', '5', '4', '5', '6', '6', '6']
            t = setTimeout(valentine, 600);
            if (vCounter >= seq.length) {
              vCounter = 0;
              clearTimeout(t);
              return;
            }
            let urlString = '';
            [...seq[vCounter]].forEach(function(number, index) {
               urlString += el[number]
            });
            location.hash = urlString;
            vCounter++;
          }
          /**
          *
          */
          function moon() {
            t = setTimeout(moon, 50);
            let f = ['ğŸŒ‘', 'ğŸŒ’', 'ğŸŒ“', 'ğŸŒ”', 'ğŸŒ•', 'ğŸŒ–', 'ğŸŒ—', 'ğŸŒ˜'];
            location.hash = f[Math.floor((Date.now()/100)%f.length)];
          }

          function clocks() {
            t = setTimeout(clocks, 1000);
            let f = ['ğŸ•','ğŸ•‘','ğŸ•’','ğŸ•“','ğŸ•”','ğŸ••','ğŸ•–','ğŸ•—','ğŸ•˜','ğŸ•™','ğŸ•š','ğŸ•›'];
            //console.log(Math.floor((Date.now()/1000)%f.length));
            location.hash = f[Math.floor((Date.now()/1000)%f.length)];
          }

          function runner() {
            t = setTimeout(runner, 100);
            road[current] = 'ğŸƒ';
            if (current < roadLen) {
              road[0] = '||';
              road[1] = '_';
              road[current+1] = '_';
              
              //random "monster"
              //road[getRandomInt(5, current-3)] = 'ğŸ¦€';

              if (current == 0) {
                road[current] = road[current+1] ='ğŸ”¥';
                current = roadLen;
              }
            }
            location.hash = road.join('');
            current--;
          }

          function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min) + min);
          }

        </script>
    </body>
</html>